#!/bin/bash

OUT=htpasswd
touch $OUT

for f in passwords/*; do
    user=$(basename $f)
    openssl rand -base64 15 > $f
    echo "Random password for $user stored in $f"
    htpasswd -b -B $OUT "$user" "$(cat $f)"
done
